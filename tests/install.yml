---
- hosts: localhost
  connection: local
  roles:
    - { name: lae.travis-lxc }
  vars:
    host_quantity: 1

# Run the following within the containers in the inventory
- hosts: all
  tasks:
    # Solution for avahi-daemon issue from https://github.com/lxc/lxc/issues/25
    - block:
      - name: Create /etc/avahi ahead of time
        file:
          path: /etc/avahi
          state: directory
          mode: 1755
      - name: Install avahi-daemon early on Ubuntu 16 containers
        package:
          name: avahi-daemon
        ignore_errors: True
      when: "ansible_distribution_release == 'xenial'"
